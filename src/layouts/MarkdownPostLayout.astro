---
import { Image } from 'astro:assets';
import Tag from '../components/interface/Tag.astro';
import '../styles/posts/codeBlockCopyButton.css';
import '../styles/posts/markdownPostStyles.css';

interface Props {
  frontmatter: any;
  postTarget: 'blog' | 'projects';
}

const { frontmatter, postTarget } = Astro.props;
---

<style>
  .post-wrapper-spacer {
    padding-inline: 0;
    width: 100%;
  }

  .post-wrapper {
    background-color: var(--clr-base);
    overflow: hidden;
  }

  .post-content {
    padding-block: 1rem;
    padding-inline: 1rem;
  }

  /*** Post Picture ***/

  .picture {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  /*** Footer ***/

  footer {
    display: flex;

    width: 100%;
  }

  .footer-content {
    width: 100%;

    padding: 1rem;
    margin-block: 2rem;

    border-radius: var(--radius-surface);

    background-color: var(--clr-base);
  }

  .tags {
    display: flex;
    flex-wrap: wrap;
    align-items: center;
    gap: 1rem;
  }

  @media screen and (min-width: 768px) {
    .post-wrapper-spacer {
      padding-inline: 1rem;
    }

    .post-wrapper {
      border-radius: var(--radius-base);
    }

    .post-content {
      padding-inline: 4rem;
    }
  }
</style>

<div class='post-wrapper-spacer max-width'>
  <article class='post-wrapper'>
    <Image
      alt={'hi'}
      width={1200}
      height={800}
      src={frontmatter.cover}
      class={'picture'}
    />
    <div class='post-content'>
      <h1>{frontmatter.title}</h1>
      <slot />
    </div>
  </article>
  <footer class='max-width'>
    <div class='footer-content'>
      <p>Tags</p>
      <div class='tags'>
        {
          frontmatter.tags.map((tag: string) => (
            <Tag url={`/${postTarget}/tags/${tag}`}>{tag}</Tag>
          ))
        }
      </div>
    </div>
  </footer>
</div>

<script src='../scripts/codeBlockCopy.ts'></script>
