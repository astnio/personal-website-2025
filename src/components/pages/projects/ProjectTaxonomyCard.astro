---
import { getIcon } from '@/scripts/utils/iconHelper';

interface Props {
  tag: string;
  projectsCount: number;
  url: string;
}

const { tag, projectsCount, url } = Astro.props;
---

<style>
  p,
  h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
    margin: 0;
  }

  .card {
    display: grid;
    grid-template-columns: auto 1fr;
    grid-template-rows: 1fr 1fr;
    align-items: center;
    gap: 0.5rem 0;

    background-color: var(--clr-base);

    border-radius: var(--radius-surface);

    overflow: hidden;

    outline: 1px solid var(--clr-surface-0);

    width: 100%;
    height: 6rem;
  }

  .icon-wrapper {
    grid-column: 1;
    grid-row: 1 / span 2;

    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 1;

    width: 6rem;
    height: 6rem;

    font-size: 3rem;

    background-color: var(--clr-mantle);

    aspect-ratio: 1 / 1;

    margin-right: 1rem;
  }

  .card-title {
    position: relative;

    grid-column: 2;
    align-self: end;

    font-size: 1.5rem;
    font-weight: 400;

    top: -0.2rem; /* Small adjustment to help center it */
  }

  .posts-link {
    position: relative;

    grid-column: 2;
    align-self: start;

    top: -0.3rem; /* Small adjustment to help center it */
  }

  a.posts-link {
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
    gap: 0.6rem;

    background-color: var(--clr-mantle);

    padding-inline: 1rem;
    padding-block: 0.6rem;

    border-radius: var(--radius-input);

    outline: 1px solid var(--clr-surface-0);

    text-decoration: none;

    max-width: fit-content;
    height: fit-content;

    transition-property: background-color, outline;
    transition-duration: 0.1s;
    transition-timing-function: ease-out;
  }

  a.posts-link:hover {
    background-color: var(--clr-surface-0);
    outline: 1px solid var(--clr-surface-1);
  }

  a.posts-link > p {
    padding: 0;
    margin: 0;
  }

  a.posts-link:hover > p,
  a.posts-link:hover > .posts-count-icon {
    color: var(--clr-primary);
  }

  .posts-link-label {
    font-size: 0.9rem;
    font-weight: 600;
  }
</style>

<article class='card box-shadow-3'>
  <div class='icon-wrapper'>
    <span class={`icon ${getIcon(tag)}`}></span>
  </div>

  <h3 class='card-title'>
    <span>{tag}</span>
  </h3>

  <a
    href={url}
    class='posts-link'
    title=`View all projects made with ${tag.toLowerCase()}`>
    <span class='posts-count-icon ri-folder-2-fill'></span>
    <p class='posts-link-label'>
      <span>View </span>
      <span>{projectsCount}</span>
      <span>{projectsCount === 1 ? ' Project' : ' Projects'}</span>
    </p>
  </a>
</article>
