---
import { getCollection } from 'astro:content';
import TaxonomyDirectory from '@layouts/TaxonomyDirectory.astro';

const allPosts = await getCollection('blog');
const publishedPosts = allPosts.filter((post) => post.data.published !== false);

const categories = [
  ...new Set(publishedPosts.map((post: any) => post.data.category).flat()),
];
---

<TaxonomyDirectory
  taxonomyCollection={categories}
  page='categories'
/>
